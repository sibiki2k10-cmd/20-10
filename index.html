<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Chúc mừng Ngày Nhà Giáo Việt Nam 20/11</title>
  <style>
    :root{
      --bg: linear-gradient(135deg,#fff7e6 0%, #ffe6f2 100%);
      --card:#ffffff;
      --accent:#ff6b6b;
      --accent2:#ffb86b;
      --text:#2b2b2b;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:30px;
    }

    .card{
      width:min(980px,95%);
      background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.95));
      border-radius:20px;
      box-shadow:0 12px 40px rgba(43,43,43,0.12);
      padding:30px;
      position:relative;
      overflow:hidden;
    }

    header{
      display:flex;
      gap:20px;
      align-items:center;
    }

    .logo{
      flex:0 0 120px;
      height:120px;
      border-radius:16px;
      background: conic-gradient(from 180deg at 50% 50%, var(--accent), var(--accent2));
      display:grid;
      place-items:center;
      color:white;
      font-weight:700;
      font-size:22px;
      transform:rotate(-6deg);
      box-shadow:0 8px 20px rgba(0,0,0,0.08);
    }

    .title{
      flex:1;
    }

    h1{
      margin:0 0 6px 0;
      font-size:28px;
      letter-spacing:0.4px;
    }
    p.lead{
      margin:0;
      color: #5a5a5a;
      font-size:15px;
    }

    .ribbon{
      position:absolute;
      right:-80px;
      top:20px;
      width:300px;
      transform:rotate(25deg);
      text-align:center;
      font-weight:700;
      color:white;
      padding:8px 0;
      border-radius:6px;
      background:linear-gradient(90deg,var(--accent),var(--accent2));
      box-shadow:0 8px 18px rgba(0,0,0,0.12);
    }

    .content{
      display:grid;
      grid-template-columns:1fr 320px;
      gap:24px;
      margin-top:22px;
      align-items:start;
    }

    .message{
      padding:18px;
      background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,248,240,0.6));
      border-radius:12px;
      box-shadow:inset 0 1px 0 rgba(255,255,255,0.6);
      line-height:1.6;
      font-size:16px;
    }

    .cta{
      margin-top:16px;
      display:flex;
      gap:12px;
      flex-wrap:wrap;
    }
    .btn{
      padding:10px 16px;
      border-radius:10px;
      border:0;
      cursor:pointer;
      font-weight:700;
      box-shadow:0 6px 18px rgba(0,0,0,0.08);
    }
    .btn-primary{background:linear-gradient(90deg,var(--accent),#ff3b6b); color:white}
    .btn-ghost{background:transparent; border:2px solid rgba(43,43,43,0.06)}

    .side-card{
      background:rgba(255,255,255,0.9);
      padding:18px;
      border-radius:12px;
      box-shadow:0 8px 24px rgba(43,43,43,0.06);
      text-align:center;
    }
    .big-number{
      font-size:42px;
      font-weight:800;
      color:var(--accent);
      margin:0 0 10px 0;
    }

    /* Confetti */
    .confetti-wrap{pointer-events:none; position:absolute; inset:0; overflow:hidden}
    .confetti{
      position:absolute;
      width:12px;height:12px;
      opacity:0.95;
      transform-origin:center;
      animation:fall linear infinite;
    }
    @keyframes fall{
      0%{transform:translateY(-10vh) rotate(0deg); opacity:1}
      100%{transform:translateY(120vh) rotate(720deg); opacity:0.9}
    }

    /* Responsive */
    @media (max-width:880px){
      .content{grid-template-columns:1fr;}
      .logo{display:none}
      .side-card{order:2}
    }
  </style>
</head>
<body>
  <div class="card" role="region" aria-label="Thiệp chúc mừng 20 tháng 11">
    <div class="ribbon">Chúc mừng 20/11</div>
    <header>
      <div class="logo">20/11</div>
      <div class="title">
        <h1>Chúc mừng Ngày Nhà Giáo Việt Nam</h1>
        <p class="lead">Gửi đến thầy cô - những người dẫn lối, truyền cảm hứng và dìu dắt chúng ta.</p>
      </div>
    </header>

    <div class="content">
      <div>
        <div class="message">
          <p><strong>Thân gửi Thầy/Cô,</strong></p>
          <p>Trong từng con chữ, từng bài giảng, thầy cô đã gieo vào lòng chúng em niềm tin, tri thức và tình thương. Chúng em xin gửi lời cảm ơn chân thành nhất vì những nỗ lực thầm lặng và những lần dẫn đường kiên nhẫn.</p>
          <p>Chúc thầy cô mạnh khỏe, tràn đầy năng lượng và tiếp tục lan tỏa ngọn lửa tri thức cho nhiều thế hệ học trò hơn nữa.</p>

          <div class="cta">
            <button class="btn btn-primary" onclick="startConfetti()">Bật pháo giấy</button>
            <button class="btn btn-ghost" onclick="downloadCard()">Tải thiệp (PNG)</button>
          </div>
        </div>
      </div>

      <aside class="side-card">
        <div class="big-number">20 / 11</div>
        <div>Ngày Nhà Giáo Việt Nam</div>
        <hr style="margin:12px 0;border:none;border-top:1px solid #f0f0f0">
        <div style="font-size:13px;color:#666">Hãy chia sẻ lời chúc này tới thầy cô của bạn ❤️</div>
      </aside>
    </div>

    <div class="confetti-wrap" id="confetti"></div>
  </div>

  <script>
    // Tạo confetti - đơn giản, không dùng thư viện
    const confettiWrap = document.getElementById('confetti');
    let confettiTimer=null;

    function rand(min,max){return Math.random()*(max-min)+min}

    function makePiece(){
      const el = document.createElement('div');
      el.className='confetti';
      const size = Math.floor(rand(8,16));
      el.style.width = size+'px';
      el.style.height = size+'px';
      el.style.left = rand(-5,105)+'%';
      el.style.top = '-10vh';
      el.style.background = `hsl(${Math.floor(rand(0,360))},70%,60%)`;
      el.style.borderRadius = Math.random()>0.6? '2px':'50%';
      el.style.animationDuration = rand(3.5,6)+'s';
      el.style.opacity = Math.random()*0.9+0.1;
      confettiWrap.appendChild(el);
      setTimeout(()=>{ el.remove() }, 7000);
    }

    function startConfetti(){
      if(confettiTimer) return;
      // tạo liên tục trong 2.5s
      const end = Date.now()+2500;
      confettiTimer = setInterval(()=>{
        for(let i=0;i<8;i++) makePiece();
        if(Date.now()>end){ clearInterval(confettiTimer); confettiTimer=null }
      },120);
    }

    // Tải thiệp: chụp vùng .card bằng canvas -> export PNG (không dùng thư viện lớn)
    async function downloadCard(){
      // Sử dụng API toDataURL từ SVG foreignObject trick
      const card = document.querySelector('.card');
      const width = card.offsetWidth;
      const height = card.offsetHeight;
      const clone = card.cloneNode(true);
      clone.style.transform='none';
      clone.style.margin='0';

      const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='${width}' height='${height}'>
        <foreignObject width='100%' height='100%'>
          ${new XMLSerializer().serializeToString(clone).replaceAll('#','%23')}
        </foreignObject>
      </svg>`;

      const blob = new Blob([svg],{type:'image/svg+xml;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const img = new Image();
      img.onload = () => {
        const canvas = document.createElement('canvas');
        canvas.width = width*2; canvas.height = height*2; // scale for quality
        const ctx = canvas.getContext('2d');
        ctx.scale(2,2);
        ctx.drawImage(img,0,0);
        URL.revokeObjectURL(url);
        canvas.toBlob((b)=>{
          const a = document.createElement('a');
          a.href = URL.createObjectURL(b);
          a.download = 'thiệp-20-11.png';
          a.click();
        });
      };
      img.crossOrigin='anonymous';
      img.src = url;
    }
  </script>
</body>
</html>